<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="../template.xhtml"
                xmlns:uib="http://engagepoint.com/uib">
    <ui:define name="mainContent">
        <h2>Create new type</h2>

        <uib:gridContainer>

            <uib:gridRow>

                <uib:gridColumn column="12">
                    <h:form id="mainForm">
                        <p:wizard id="tab" dynamic="true">

                            <p:tab id="tab1" title="Select type">
                                <h:panelGrid columns="2" cellpadding="10">
                                    <ui:include src="/modify/showTree.xhtml"/>
                                    <h:inputHidden id="typeCreateAbility" value="#{createBean.canCreate}" required="true"/>
                                </h:panelGrid>
                            </p:tab>

                            <p:tab id="tab2" title="Add attributes">
                                <h:panelGrid id="grid" columns="2" cellpadding="10">
                                    <ui:include src="/modify/addAttributes.xhtml"/>
                                </h:panelGrid>
                            </p:tab>

                            <p:tab id="tab3" title="Add metadata">
                                <h:panelGrid columns="1" cellpadding="10">
                                    <ui:include src="/modify/addMetadata.xhtml"/>
                                </h:panelGrid>
                            </p:tab>
                        </p:wizard>
                    </h:form>
                </uib:gridColumn>

            </uib:gridRow>

        </uib:gridContainer>

        <h:form id="fullPropertyForm" prependId="false">
            <uib:modal id="fullPropertyModal" header="Full Property Info">
                <p:panelGrid columns="2" id="fullPropertyGrid">

                    <h:outputText value="ID: "/>
                    <h:outputText value="#{createBean.newPropertyRow.id}"/>

                    <h:outputText value="Local Name: "/>
                    <h:outputText value="#{createBean.newPropertyRow.localName}"/>

                    <h:outputText value="Local Namespace: "/>
                    <h:outputText value="#{createBean.newPropertyRow.localNamespace}"/>

                    <h:outputText value="Display Name: "/>
                    <h:outputText value="#{createBean.newPropertyRow.displayName}"/>

                    <h:outputText value="Query Name: "/>
                    <h:outputText value="#{createBean.newPropertyRow.queryName}"/>

                    <h:outputText value="Description: "/>
                    <h:outputText value="#{createBean.newPropertyRow.description}"/>

                    <h:outputText value="Inherited: "/>
                    <h:outputText value="#{createBean.newPropertyRow.inherited}"/>

                    <h:outputText value="Required: "/>
                    <h:outputText value="#{createBean.newPropertyRow.required}"/>

                    <h:outputText value="Queryable: "/>
                    <h:outputText value="#{createBean.newPropertyRow.queryable}"/>

                    <h:outputText value="Orderable: "/>
                    <h:outputText value="#{createBean.newPropertyRow.orderable}"/>

                    <h:outputText value="Open Choice: "/>
                    <h:outputText value="#{createBean.newPropertyRow.openChoice}"/>

                    <h:outputText value="Property Type: "/>
                    <h:outputText value="#{createBean.newPropertyRow.propertyType}"/>

                    <h:outputText value="Cardinality: "/>
                    <h:outputText value="#{createBean.newPropertyRow.cardinality}"/>

                    <h:outputText value="Updatability: "/>
                    <h:outputText value="#{createBean.newPropertyRow.updatability}"/>

                </p:panelGrid>
                <f:facet name="footer">
                    <p:commandButton title="Cancel" mode="client" value="Cancel"
                                     styleClass="secondary"
                                     oncomplete="jQuery('#fullPropertyModal').modal('hide');
                                         return false;"/>
                </f:facet>
            </uib:modal>
        </h:form>

        <h:form id="addMetadata" prependId="false">
            <p:dialog id="addMetadataModal" widgetVar="addMetadataDialog" modal="true" header="Add metadata"
                      draggable="false" resizable="false" width="200">

                <p:panelGrid columns="2" id="metadataGrid">

                    <h:outputText value="ID: "/>
                    <p:inputText id="id" value="#{createBean.newPropertyRow.id}" required="true"/>

                    <h:outputText value="Local Name: "/>
                    <p:inputText id="localname" value="#{createBean.newPropertyRow.localName}" required="true"/>

                    <h:outputText value="Local Namespace: "/>
                    <p:inputText id="localnamespace" value="#{createBean.newPropertyRow.localNamespace}" required="true"/>

                    <h:outputText value="Display Name: "/>
                    <p:inputText id="displayname" value="#{createBean.newPropertyRow.displayName}" required="true"/>

                    <h:outputText value="Query Name: "/>
                    <p:inputText id="queryname" value="#{createBean.newPropertyRow.queryName}" required="true"/>

                    <h:outputText value="Description: "/>
                    <p:inputText value="#{createBean.newPropertyRow.description}" required="true"/>

                    <h:outputText value="Inherited: "/>
                    <p:selectBooleanCheckbox value="#{createBean.newPropertyRow.inherited}"/>

                    <h:outputText value="Required: "/>
                    <p:selectBooleanCheckbox value="#{createBean.newPropertyRow.required}"/>

                    <h:outputText value="Queryable: "/>
                    <p:selectBooleanCheckbox value="#{createBean.newPropertyRow.queryable}"/>

                    <h:outputText value="Orderable: "/>
                    <p:selectBooleanCheckbox value="#{createBean.newPropertyRow.orderable}"/>

                    <h:outputText value="Open Choice: "/>
                    <p:selectBooleanCheckbox value="#{createBean.newPropertyRow.openChoice}"/>

                    <h:outputText value="Property Type: "/>
                    <p:selectOneMenu id="selectPropertyType" value="#{createBean.newPropertyRow.propertyType}">
                        <f:selectItems value="#{createBean.propertyTypeEnums}"/>
                    </p:selectOneMenu>

                    <h:outputText value="Cardinality: "/>
                    <p:selectOneMenu id="selectCardinality" value="#{createBean.newPropertyRow.cardinality}">
                        <f:selectItems value="#{createBean.cardinalityEnums}"/>
                    </p:selectOneMenu>

                    <h:outputText value="Updatability: "/>
                    <p:selectOneMenu id="selectUpdatability" value="#{createBean.newPropertyRow.updatability}">
                        <f:selectItems value="#{createBean.updatabilityEnums}"/>
                    </p:selectOneMenu>

                </p:panelGrid>

                <f:facet name="footer">

                    <uib:gridContainer styleClass="pad">

                        <uib:gridRow fluid="true">
                            <uib:gridColumn column="6">
                                <p:outputLabel value="" />
                            </uib:gridColumn>
                            <uib:gridColumn column="3">
                                <p:commandButton title="Cancel" mode="client" value="Cancel"
                                                 styleClass="secondary" oncomplete="addMetadataDialog.hide()" />
                            </uib:gridColumn>
                            <uib:gridColumn column="3">
                                <p:commandButton id="add" title="Add" mode="client" value="Add metadata"
                                                 onsuccess="addMetadataDialog.hide()" update=":addMetadata, :mainForm"
                                                 action="#{createBean.addProperty}" />
                            </uib:gridColumn>
                        </uib:gridRow>
                    </uib:gridContainer>

                </f:facet>
            </p:dialog>
        </h:form>

    </ui:define>
</ui:composition>
